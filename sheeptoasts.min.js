/*****************************************************
 Name: SheepToasts
 Version: 1.1
 Author: Szymon Lisowiec
 Github: https://github.com/SzymonLisowiec/SheepToasts
 License: MIT
*****************************************************/
function SheepToasts(a){"use strict";"undefined"==typeof a&&(a={});var b={animation:a.animation||!1,sort:"top"==a.sort?"top":"bottom",toastMargin:a.toastMargin||4,delayRemove:a.delayRemove||5e3,zIndex:a.zIndex||1e3,cssMain:{display:"inline-block",maxWidth:"320px",padding:"5px 8px",position:"fixed",top:"auto",right:"32px",bottom:"32px",left:"auto",borderRadius:"3px",wordBreak:"break-all",fontFamily:"cursive, sans-serif",fontSize:"13px",cursor:"pointer",transition:"top 0.32s, bottom 0.32s",webKitAnimationDuration:"0.5s",mozAnimationDuration:"0.5s",oAnimationDuration:"0.5s",animationDuration:"0.5s"},cssButtons:{display:"inline-block",height:"20px",margin:"-3px 0 0 3px",padding:"0 5px",verticalAlign:"middle",whiteSpace:"nowrap",border:"none",borderRadius:"10px",fontFamily:"inherit",fontSize:"11px",cursor:"pointer"},cssModes:{warning:{color:"#fafeff",background:"#c8354e",textShadow:"#e74c3c 1px 2px 1px",_buttons:{color:"#fafeff",textShadow:"#46231f 0px 0px 3px",background:"#e25353"}},info:{color:"#fafeff",background:"#2980b9",textShadow:"#3498db 1px 2px 1px",_buttons:{color:"#fafeff",textShadow:"#173646 0px 0px 3px",background:"#2c9fea"}},success:{color:"#fafeff",background:"#27ae60",textShadow:"#1e7744 1px 2px 1px",_buttons:{color:"#fafeff",textShadow:"#185833 0px 0px 3px",background:"#5ac17f"}}},root:null,toasts:{},toastCounter:0,toastsMonster:null,init:function(){if("undefined"!=typeof a.cssMain)for(var d in a.cssMain)b.cssMain[d]=a.cssMain[d];if("undefined"!=typeof a.cssButtons)for(var d in a.cssButtons)b.cssButtons[d]=a.cssButtons[d];if("undefined"!=typeof a.cssModes)for(var d in a.cssModes)b.cssModes[d]=a.cssModes[d];return"auto"!=b.cssMain.top&&"auto"!=b.cssMain.top?console.error('SheepToasts :: One cssMain property of "top" and "bottom" have to be set on "auto"'):(b.root=document.createElement("div"),b.root.setAttribute("id","SheepToasts"),b.root.style.width=0,b.root.style.height=0,b.root.style.overflow="visable",b.root.style.position="fixed",b.root.style.top=0,b.root.style.left=0,b.root.style.left=0,b.root.style.zIndex=b.zIndex,b.body=document.getElementsByTagName("body")[0],b.body.insertBefore(b.root,b.body.firstChild),delete b.body,b.animation&&"undefined"!=typeof b.animation.duration&&(b.cssMain.webKitanimationDuration=b.animation.duration,b.cssMain.mozanimationDuration=b.animation.duration,b.cssMain.oanimationDuration=b.animation.duration,b.cssMain.animationDuration=b.animation.duration),void(b.toastMonser=setInterval(function(){for(var a in b.toasts)a=b.toasts[a],"undefined"!=typeof a.dataset.timeRemove&&(new Date).getTime()>=a.dataset.timeRemove&&c.close(a.id)},100)))}},c={show:function(a,d,e,f){if("undefined"!=typeof b.cssModes[a]){var g=document.getElementById("SheepToast-"+b.toastCounter),h=document.createElement("div");b.toastCounter++,h.dataset.count=b.toastCounter,h.setAttribute("id","SheepToast-"+b.toastCounter),b.toasts["SheepToast-"+b.toastCounter]=h,h.innerHTML=d;for(var i in b.cssMain)h.style[i]=b.cssMain[i];for(var i in b.cssModes[a])"_buttons"!=i&&(h.style[i]=b.cssModes[a][i]);if(b.animation&&(h.className="animated "+b.animation.in),"string"==typeof e&&(h.className="animated "+e),b.root.appendChild(h),"top"==b.sort&&null!=g){var j="auto"!=h.style.top?"top":"bottom";h.style[j]=parseFloat(g.offsetHeight)+parseFloat(g.style[j])+b.toastMargin+"px"}else for(var k in b.toasts)k!=h.id&&(b.toasts[k].style[b.sort]=parseFloat(b.toasts[k].style[b.sort])+parseFloat(h.offsetHeight)+b.toastMargin+"px");if("object"==typeof f)for(var i in f){var l=f[i],m=document.createElement("button");m.setAttribute("id","SheepToast-button-"+i),m.innerHTML=l.value;for(var i in b.cssButtons)m.style[i]=b.cssButtons[i];for(var i in b.cssModes[a]._buttons)m.style[i]=b.cssModes[a]._buttons[i];m.toastId=h.id,"undefined"!=typeof l.callback&&(m.onclick=l.callback),m.addEventListener("focus",function(){this.style.outline="none"}),h.appendChild(m)}else h.dataset.timeRemove=(new Date).getTime()+b.delayRemove,h.addEventListener("click",function(){c.close(h.id)})}else console.error("SheepToast :: Selected toast mode not exists.")},warning:function(a,b,d){c.show("warning",a,b,d)},info:function(a,b,d){c.show("info",a,b,d)},success:function(a,b,d){c.show("success",a,b,d)},close:function(a,c){b.animation||"string"==typeof c?(["webkitAnimationEnd","mozAnimationEnd","MSAnimationEnd","oanimationend","animationend"].forEach(function(c){b.toasts[a].addEventListener(c,function(c){if("undefined"!=typeof b.toasts[a]){if("bottom"==b.sort)for(var d in b.toasts){if(d==a)break;var e=b.toasts[d],f="auto"!=e.style.top?"top":"bottom";e.style[f]=parseFloat(e.style[f])-parseFloat(b.toasts[a].offsetHeight)-b.toastMargin+"px"}else for(var d in b.toasts)if(b.toasts[d].dataset.count>b.toasts[a].dataset.count){var e=b.toasts[d],f="auto"!=e.style.top?"top":"bottom";e.style[f]=parseFloat(e.style[f])-parseFloat(b.toasts[a].offsetHeight)-b.toastMargin+"px"}b.toasts[a].parentNode.removeChild(b.toasts[a]),delete b.toasts[a]}})}),b.animation&&(b.toasts[a].className="animated "+b.animation.out),"string"==typeof c&&(b.toasts[a].className="animated "+c)):(b.toasts[a].parentNode.removeChild(b.toasts[a]),delete b.toasts[a])}};return b.init(),c}
